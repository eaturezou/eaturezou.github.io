---
layout: post
author: eature
published: true
categories: Git
modify: 2018-01-11
tags:
- git
---
##### 版本控制概述
  版本控制可分为本地版本控制，集中版本控制和分布式版本控制  
  其中`集中式版本控制`中常用的有`svn`，包括一个包含所有版本的版本控制服务器和一些熊中央服务器检索出文件的主机  
  `分布式版本控制`中就浪的就是`git`了，哈哈，浪一波
##### git的一些基本认识
首先，git所存储的是每一个版本的快照而不是与其他版本的差异，这是git与其他vcs系统的主要区别之一，如svn，就是存储版本之前的差异，而git在存储每一个版本的快照，其中，为了高效，如果有文件没有更改的话，则git不会再次的存储该文件，而是创建一个链接到前一个相同的文件  
git有三个状态，即 `committed` `modify` `staged`  
* `committed` 意味者数据提交到了本地仓库
* `modify` 意味着文件已经更改，但是还没有提交到本地仓库
* `staged` 意味着已经在当前版本中标记了一个修改过的文件  
![git工作流程](https://git-scm.com/book/en/v2/images/areas.png)
基本的git工作流程是  
        1. 修改工作区的文件
        2. 暂存你想要更改到下一个版本的相关文件
        3. 提交更改到git棒哭


#### git基础
###### 1. 初始化git仓库

* 配置git仓库的用户名和email  
`git config --global user.name 'USERNAME'`  
`git config --global user.email 'YOUR EMAIL'`


* 将当前目录切换到项目目录中，执行`git init`初始化git仓库  
> `cd ProjectDirectory`    
> `git init`  

执行完后，将创建一个名为 `.git `的新的子目录，其中包含一些必要的存储文件  
* 如果想要跟踪文件的话则需要执行`git add`添加跟踪的文件并`git commit`进行一个初步的提交
```
  git add .
  gti commit -m 'init version'
```
* 若想从现有的仓库中克隆一份到本地仓库则需要执行`git clone`
        git clone (URL)  

###### 2. 记录更改
在工作目录中，所有文件都处于已跟踪和未跟踪状态,使用`git status`可查看git仓库的状态并显示详细信息，可使用`git status -s`来显示简短的状态信息  
```
  $ git status -s
  M README
  MM Rakefile
  A  lib/git.rb
  M  lib/simplegit.rb
  ?? LICENSE.txt
```  
其中??表示文件未被跟踪，添加到暂存区的新文件为A，已修改的文件未M  

**跟踪新文件**，当要开始跟踪一个新的文件的时候，可以使用`git add filename`来将文件加入到git跟踪  
`git add`命令添加文件或者目录到git跟踪中，如果是一个目录的话，则会递归的跟踪目录中的所有文件  
**.gitignore忽略文件跟踪**   
  你可以放在.gitignore文件中的模式规则如下：   
>  
  1. 空行或行开头#被忽略。
  2. 标准全局模式工作，并将在整个工作树中递归应用。
  3. 您可以使用正斜杠（/）开始模式以避免递归。
  4. 您可以用正斜杠（/）结束模式来指定一个目录。
  5. 您可以通过用感叹号（!）开头来取消模式。  

一个实例文件
```
# ignore all .a files
*.a

# but do track lib.a, even though you're ignoring .a files above
!lib.a

# only ignore the TODO file in the current directory, not subdir/TODO
/TODO

# ignore all files in the build/ directory
build/

# ignore doc/notes.txt, but not doc/server/arch.txt
doc/*.txt

# ignore all .pdf files in the doc/ directory and any of its subdirectories
doc/**/*.pdf
```

**查看提交历史**  
`git log` 将显示所有的提交历史   
一个比较常用的选项是`git log -p` 显示每个提交中的差异  
例如: `git log -p -2` 显示最后两次提交，并显示差异  

**还原文件**  
`git reset head filename`  取消文件暂存
`git checkout filename`  取消文件的修改
